#!/bin/sh

date +"%m %d %Y" | while read a b c
do
echo Date is $a.$b.$c

cd tests
mkdir $c-$b-$a
cd ..

echo make clean
make clean
echo make release UNKNOWN_NR=1
make release UNKNOWN_NR=1

echo 2d
echo 5-point

echo 513x513
flexamg 513 513 0 2 0 0 0 > tests/$c-$b-$a/amg_test2d.txt

echo 1025x513
flexamg 1025 513 0 2 0 0 0 >> tests/$c-$b-$a/amg_test2d.txt

echo 1025x1025
flexamg 1025 1025 0 2 0 0 0 >> tests/$c-$b-$a/amg_test2d.txt

echo 1025x1025 sgs test
flexamg 1025 1025 0 2 0 0 1 > tests/$c-$b-$a/alg_test.txt
echo 1025x1025 mult
flexamg 1025 1025 0 2 0 0 2 >> tests/$c-$b-$a/alg_test.txt

echo 9-point

echo 513x513
flexamg 513 513 0 2 1 0 0 >> tests/$c-$b-$a/amg_test2d.txt

echo 1025x513
flexamg 1025 513 0 2 1 0 0 >> tests/$c-$b-$a/amg_test2d.txt

echo 1025x1025
flexamg 1025 1025 0 2 1 0 0 >> tests/$c-$b-$a/amg_test2d.txt

echo 1025x1025 sgs test
flexamg 1025 1025 0 2 1 0 1 >> tests/$c-$b-$a/alg_test.txt
echo 1025x1025 mult
flexamg 1025 1025 0 2 1 0 2 >> tests/$c-$b-$a/alg_test.txt

echo 3d
echo 7-point

echo 33x33x33
flexamg 33 33 33 3 0 0 0 > tests/$c-$b-$a/amg_test3d.txt

echo 33x65x129
flexamg 33 65 129 3 0 0 0 >> tests/$c-$b-$a/amg_test3d.txt

echo 65x65x65
flexamg 65 65 65 3 0 0 0 >> tests/$c-$b-$a/amg_test3d.txt

echo 65x65x65 sgs test
flexamg 65 65 65 3 0 0 1 >> tests/$c-$b-$a/alg_test.txt
echo 65x65x65 mult
flexamg 65 65 65 3 0 0 2 >> tests/$c-$b-$a/alg_test.txt

echo 27-point

echo 33x33x33
flexamg 33 33 33 3 1 0 0 >> tests/$c-$b-$a/amg_test3d.txt

echo 33x65x129
flexamg 33 65 129 3 1 0 0 >> tests/$c-$b-$a/amg_test3d.txt

echo 65x65x65
flexamg 65 65 65 3 1 0 0 >> tests/$c-$b-$a/amg_test3d.txt

echo 65x65x65 sgs test
flexamg 65 65 65 3 1 0 1 >> tests/$c-$b-$a/alg_test.txt
echo 65x65x65 mult
flexamg 65 65 65 3 1 0 2 >> tests/$c-$b-$a/alg_test.txt

make clean
echo make release UNKNOWN_NR=3
make release UNKNOWN_NR=3

echo 513x513
flexamg 513 513 0 2 0 0 0 > tests/$c-$b-$a/fixed_sys_test.txt
echo 33x33x33
flexamg 33 33 33 3 0 0 0 >> tests/$c-$b-$a/fixed_sys_test.txt

echo 513x513 full
flexamg 513 513 0 2 1 0 0 >> tests/$c-$b-$a/fixed_sys_test.txt
echo 33x33x33 full
flexamg 33 33 33 3 1 0 0 >> tests/$c-$b-$a/fixed_sys_test.txt


make clean
echo make release UNKNOWN_NR=3 VARIABLE_STORAGE=1
make release UNKNOWN_NR=3 VARIABLE_STORAGE=1

echo 513x513
flexamg 513 513 0 2 0 0 0 > tests/$c-$b-$a/variable_sys_test.txt
echo 33x33x33
flexamg 33 33 33 3 0 0 0 >> tests/$c-$b-$a/variable_sys_test.txt

echo 513x513 full
flexamg 513 513 0 2 1 0 0 >> tests/$c-$b-$a/variable_sys_test.txt
echo 33x33x33 full
flexamg 33 33 33 3 1 0 0 >> tests/$c-$b-$a/variable_sys_test.txt


done
